Installation instructions for DVH Analytics

---------------
Pre-requisites:
---------------
Chrome or Firefox:
The web views are not supported on Internet Explorer or Safari.  Please download Chrome or Firefox.


Xcode Command Line Tools (Mac Only)
-----------------------------------
Make sure Xcode command line tools are installed
If the full Xcode package is installed (from the Mac App Store), entire the following into a terminal window:
xcode-select --install

pip (python package management):
If you do not already have pip, enter the following into a terminal window:
easy_install pip


PostgreSQL
----------
If you are familiar with PostgreSQL and have access to a PostgreSQL DB, you simply need to fill in the
login information in:
dvh/preferences/SQL_Connection.cnf.

If you need PostgreSQL, here are some options for each OS

Mac OS:
Simply go here and download the PostgreSQL app: http://postgresapp.com/
Open the app, Click "Start", then double-click "postgres" with the cylindrical database icon
type the following in the SQL terminal:

create database dvh;
\q

NOTE: You may replace dvh with any database name you wish, but you must update dbname in
dvh/preferences/SQL_Connection.cnf to reflect what database name you chose.
This app must be running when writing or accessing data.

If you use OS authentication, make sure dvh/preferences/SQL_Connection.cnf does not have 'user' or 'password' names.
If you choose to create a user and password, update said .cnf file appropriately.

Ubuntu:
Type the following in a terminal (pgadmin3 is not required, but is a great tool for those unfamiliar with SQL):
sudo apt-get install postgresql postgresql-client postgresql-contrib libpq-dev
sudo apt-get install pgadmin3
Upon successful installation, open type 'pgadmin3' in the terminal to open the graphical admin.
Create a user and database of your choice, and update dvh/preferences/sql_connection.cnf as appropriate.


---------------------------
Setting up your environment
---------------------------
Download the entire source code from Github either via git or manual download (unzip and move to desired location).

From a terminal window, change your directory to the LiveFreeOrDICOM folder (e.g., cd ~/LiveFreeOrDICOM)

execute the install_mac.sh script by typing either:
./install-python-packages_mac.sh
    or
./install-python-packages_ubuntu.sh

------------------------
Processing test files
------------------------
From the same directory as the previous step, type the following:
python dvh/DICOM_to_SQL.py

This will take several minutes. DICOM_to_SQL will process all dicom files located in the inbox as specified
in the file dvh/preferences/import_settings.txt and move them into the location specified by imported.

--------
Web view
--------
From the same directory as the previous step, type the following to start the bokeh server:
bokeh serve --show dvh/
If Chrome or Firefox is not your default browswer, you'll need to copy and paste the url into Chrome or Firefox.
From within the active terminal, press ctrl + c to stop the Bokeh server.

If you would like to specify an IP or port other than the default 127.0.0.1:5006, use the following when starting
the bokeh server.  You may be interested in this if running from a computer with a static IP and would like
to access this bokeh server from across your network.
bokeh serve --allow-websocket-origin=<new IP:port> dvh/
bokeh serve dvh/ --port <some other port number>
